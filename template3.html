<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>UK Parties</title>

  <style>
    body {
      font-family: sans-serif;
      max-width: 500px;
      margin: 2rem auto;
      text-align: center;
    }

    .answers button {
      display: block;
      width: 100%;
      margin: 0.5rem 0;
      padding: 0.75rem;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1 id="question"></h1>
  <div class="answers" id="answers"></div>
  <div id="progress"></div>
  <div id="result"></div>

  <script>
    // -------------------------
    // JSON DATA
    // -------------------------
    const quizData = {
      results: {
        green: {
          title: "The Green Party",
          description: "You should support The Green Party!"
        },
        labour: {
          title: "Labour",
          description: "You should support Labour!"
        },
        libdem: {
          title: "Liberal Democrats",
          description: "You should support the Lib Dems!"
        },
        conservative: {
          title: "Conservatives",
          description: "You should support the Conservatives!"
        }
      },

      questions: [
        {
          text: "Q1",
          answers: [
            {
              text: "answering",
              scores: { green: 2, labour: 0, libdem: 1, conservative: 10 }
            },
            {
              text: "another",
              scores: { green: 0, labour: 2, libdem: 0, conservative: 0 }
            },
            {
              text: "three",
              scores: { green: 0, labour: 1, libdem: 2, conservative: 0 }
            }
          ]
        },
        {
          text: "which one",
          answers: [
            {
              text: "this one",
              scores: { green: 2, labour: 0, libdem: 0, conservative: 0 }
            },
            {
              text: "that one",
              scores: { green: 0, labour: 2, libdem: 1, conservative: 0 }
            },
            {
              text: "hey",
              scores: { green: 0, labour: 0, libdem: 2, conservative: 0 }
            }
          ]
        }
      ]
    };

    // -------------------------
    // STATE
    // -------------------------
    let currentQuestion = 0;
    const totals = {};

    Object.keys(quizData.results).forEach(type => {
      totals[type] = 0;
    });

    // -------------------------
    // RENDER QUESTION
    // -------------------------
    function renderQuestion() {
      const question = quizData.questions[currentQuestion];

      document.getElementById("question").innerText =
        question.text;

      document.getElementById("progress").innerText =
        `Question ${currentQuestion + 1} of ${quizData.questions.length}`;

      const answersDiv = document.getElementById("answers");
      answersDiv.innerHTML = "";

      question.answers.forEach(answer => {
        const btn = document.createElement("button");
        btn.innerText = answer.text;

        btn.onclick = () => {
          addScores(answer.scores);
          nextQuestion();
        };

        answersDiv.appendChild(btn);
      });
    }

    // -------------------------
    // SCORING
    // -------------------------
    function addScores(scores) {
      for (let type in scores) {
        totals[type] += scores[type];
      }
    }

    // -------------------------
    // NEXT STEP
    // -------------------------
    function nextQuestion() {
      currentQuestion++;

      if (currentQuestion < quizData.questions.length) {
        renderQuestion();
      } else {
        showResult();
      }
    }

    // -------------------------
    // SHOW RESULT
    // -------------------------
    function showResult() {
      document.getElementById("question").remove();
      document.getElementById("answers").remove();
      document.getElementById("progress").remove();

      const maxScore = Math.max(...Object.values(totals));
      const winner = Object.keys(totals).find(
        type => totals[type] === maxScore
      );

      document.getElementById("result").innerHTML = `
        <h2>${quizData.results[winner].title}</h2>
        <p>${quizData.results[winner].description}</p>
      `;
    }

    // start quiz
    renderQuestion();
  </script>

</body>
</html>
